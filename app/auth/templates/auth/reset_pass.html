{% extends "auth/base.html" %}

{% block title %}FindMe - Reset Password{% endblock %}

{% block subtitle %}Create a new password{% endblock %}

{% block extra_css %}
<link href="{{url_for('auth.static', filename='auth/css/reset_pass.css')}}" rel="stylesheet">
{% endblock %}

{% block content %}
<div id="reset-form-container">
    <div class="card-header">
        <i class="fas fa-lock"></i>
        <h2>Reset Your Password</h2>
        <p>Enter a new password for your account. Make sure it's strong and secure.</p>
    </div>

    <form id="reset-password-form">
        <input type="hidden" name="token" value="{{ token }}">
        
        <div class="form-group">
            <label class="form-label">
                <span class="required">*</span> New Password
            </label>
            <div class="input-group">
                <input type="password" name="password" id="new-password" class="form-input" placeholder="Enter new password" required autofocus onkeyup="checkPasswordRequirements()">
                <i class="fas fa-lock input-icon"></i>
                <i class="fas fa-eye toggle-password" onclick="togglePassword(this)"></i>
            </div>
            <div class="password-strength">
                <div class="password-strength-bar" id="strength-bar"></div>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">
                <span class="required">*</span> Confirm Password
            </label>
            <div class="input-group">
                <input type="password" name="confirm_password" id="confirm-password" class="form-input" placeholder="Confirm new password" required onkeyup="checkPasswordMatch()">
                <i class="fas fa-lock input-icon"></i>
                <i class="fas fa-eye toggle-password" onclick="togglePassword(this)"></i>
            </div>
            <div id="match-indicator" style="margin-top: 6px; font-size: 0.8rem;"></div>
        </div>

        <button type="submit" class="btn btn-primary">
            <i class="fas fa-check"></i> Reset Password
        </button>
    </form>

    <div class="password-requirements">
        <div class="requirement-title">
            <i class="fas fa-shield-alt"></i>
            Password Requirements
        </div>
        <div class="requirement-item" id="req-length">
            <i class="fas fa-circle"></i>
            At least 8 characters long
        </div>
        <div class="requirement-item" id="req-uppercase">
            <i class="fas fa-circle"></i>
            Contains uppercase letter (A-Z)
        </div>
        <div class="requirement-item" id="req-lowercase">
            <i class="fas fa-circle"></i>
            Contains lowercase letter (a-z)
        </div>
        <div class="requirement-item" id="req-number">
            <i class="fas fa-circle"></i>
            Contains a number (0-9)
        </div>
        <div class="requirement-item" id="req-special">
            <i class="fas fa-circle"></i>
            Contains special character (!@#$%^&*)
        </div>
    </div>

    <div class="back-link">
        <a href="/auth" class="link">
            <i class="fas fa-arrow-left"></i> Back to Login
        </a>
    </div>
</div>

<div id="success-message" class="success-message">
    <i class="fas fa-check-circle success-icon"></i>
    <div class="success-title">Password Reset Successful!</div>
    <div class="success-text">
        Your password has been successfully reset. You can now login with your new password.
    </div>
    <a href="/auth" class="btn btn-primary">
        <i class="fas fa-sign-in-alt"></i> Go to Login
    </a>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{url_for('auth.static', filename='auth/js/reset_pass.js')}}"></script>
{% endblock %}